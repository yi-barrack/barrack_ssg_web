<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>barrack's page</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>
    <header>
        <h1 id="main_page_title">Welcome to barrack's page</h1>
        <div id="login-wrapper">
            <h2>Login</h2>
            <form action="/login" method="post" id="login-form">
                <input type="text" name="id" placeholder="ID">
                <br>
                <input type="password" name="psw" placeholder="Password">
                <br>
                <input id="login_submit" type="submit" value="Login">
            </form>

            <!--register 창 부분-->
            <button id="register_button" onclick="document.getElementById('id01').style.display='block'"
                style="width:auto;">Register</button>
            <div id="id01" class="modal">
                <span onclick="document.getElementById('id01').style.display='none'" class="close"
                    title="Close Modal">×</span>
                <!--id pw 를 action 주소에 post형식으로 보냄-->
                <form class="modal-content" method="post" action="/register">
                    <div class="container">
                        <h1>Register</h1>
                        <p>Please fill in this form to create an account.</p>
                        <hr>
                        <label for="id"><b>ID</b></label><br>
                        <!--name 부분이 json 키 값이 됨-->
                        <input type="text" placeholder="Enter ID" name="id" required>
                        <br>
                        <label for="psw"><b>Password</b></label><br>
                        <input type="password" placeholder="Enter Password" name="psw" required>
                        <!-- 두번 비교하는건 나중에.
                        <label for="psw-repeat"><b>Repeat Password</b></label>
                        <input type="password" placeholder="Repeat Password" name="psw-repeat" required>
                        -->
                        <div class="clearfix">
                            <button type="button" onclick="document.getElementById('id01').style.display='none'"
                                class="cancelbtn">Cancel</button>
                            <button type="submit" class="signupbtn">Sign Up</button>
                        </div>
                    </div>
                </form>
            </div>
            <script>
                // Get the modal
                var modal = document.getElementById('id01');

                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function (event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
            </script>
        </div>
    </header>

    <nav>

    </nav>

    <section></section>
    <article></article>

    <aside></aside>

    <footer></footer>

    <script>
        window.onload = function () {
            const urlParams = new URLSearchParams(window.location.search);
            const registerSuccess = urlParams.get('register_success');
            if (registerSuccess === 'true') {
                alert('로그인 성공');
            }
        }
         fetch('/username')
                .then(response => response.json())
                .then(data => {
                    if (data.username) {
                        window.location.href = '/for_users/login_index.html';
                    }
                });
    </script>

</body>

</html>